@using makeITeasy.AppFramework.Core.Commands
@using makeITeasy.AppFramework.Core.Queries
@using makeITeasy.PerformanceReview.BusinessCore.Queries.EmployeeQueries
@using makeITeasy.PerformanceReview.BusinessCore.Queries.PerformanceReviewFormQueries
@using makeITeasy.PerformanceReview.Models

<MudForm @ref="form" @bind-IsValid="@success" Class="pa-4">
    <MudGrid>
        <MudItem xs="12" sm="6">
            <MudSelect T="Employee" Label="Employee" AnchorOrigin="Origin.BottomCenter" Clearable="true" Required="true"  @bind-Value="selectedEmployee">
                @foreach (Employee employee in employees)
                {
                    <MudSelectItem Value="@employee">@employee.Name</MudSelectItem>
                }
            </MudSelect>
        </MudItem>
        <MudItem xs="12" sm="6">
            <MudSelect T="Form" Label="Review" AnchorOrigin="Origin.BottomCenter" Clearable="true" Required="true" @bind-Value="selectedForm">
                @foreach (Form form in forms)
                {
                    <MudSelectItem Value="@form">@form.Name</MudSelectItem>
                }
            </MudSelect>
        </MudItem>
        <MudItem Class="d-flex flex-row-reverse flex-grow-1 gap-4 ">
            <MudButton Variant="Variant.Filled" Color="Color.Primary" Disabled="@(!success || _processing)" OnClick="Create">
                @if (_processing)
                {
                    <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                    <MudText Class="ms-2">Processing</MudText>
                }
                else
                {
                    <MudText>Create</MudText>
                }
            </MudButton>
        </MudItem>
    </MudGrid>
</MudForm>


