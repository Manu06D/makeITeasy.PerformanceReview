@using makeITeasy.PerformanceReview.Models

<style>
    .mud-table-cell-custom-group {
        font-weight: 500;
    }

    .mud-table-cell-custom-group-footer {
        padding-bottom: 50px;
        text-align: right;
    }
</style>

@if (evaluation != null)
{
    <MudTable Hover="true" Breakpoint="Breakpoint.Sm" Height="500px" FixedHeader="true"
          Items="@evaluation.Form.FormItems"
          T=FormItem
          GroupBy="@_groupDefinition"
          GroupHeaderStyle="background-color:var(--mud-palette-background-grey)"
          GroupFooterClass="mb-4">
        <ColGroup>
            <col style="width: 60px;" />
            <col />
            <col />
            <col />
        </ColGroup>
        <HeaderContent>
            <MudTh>Question</MudTh>
            <MudTh>Manager</MudTh>
            <MudTh>Employee</MudTh>
        </HeaderContent>
        <GroupHeaderTemplate>
            <MudTh Class="mud-table-cell-custom-group" colspan="5">@($"{context.Key}")</MudTh>
        </GroupHeaderTemplate>
        <RowTemplate>
            <MudTd DataLabel="Description">@context.Description</MudTd>
            <MudTd DataLabel="Nr">
                <MudRating Size="Size.Medium"
                       @bind-SelectedValue="evaluation.EvaluationItems.First(x => x.UserIdentityId == evaluation.ManagerIdentityId && x.FormItemId==context.Id).Rating"
                       ReadOnly="evaluation.ManagerIdentityId != currentIdentityUserID"></MudRating>
            </MudTd>
            <MudTd DataLabel="Nr">
                <MudRating Size="Size.Medium"
                       @bind-SelectedValue="evaluation.EvaluationItems.First(x => x.UserIdentityId == evaluation.UserIdentityId && x.FormItemId==context.Id).Rating"
                       ReadOnly="evaluation.UserIdentityId != currentIdentityUserID"></MudRating>
            </MudTd>
            @*            <MudTd DataLabel="Sign">@context.Id</MudTd>
                <MudTd DataLabel="Name"></MudTd>
                <MudTd DataLabel="Position">@context.Category</MudTd>
                <MudTd Style="text-align: right" DataLabel="Molar mass"></MudTd>*@
        </RowTemplate>
    </MudTable>
    <MudPaper Class="d-flex flex-row-reverse flex-grow-1 gap-4" Elevation="0">
        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="Close" Class="d-inline-flex pa-4">Close xx</MudButton>
        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="Update" Class="d-inline-flex pa-4">Update xx</MudButton>
    </MudPaper>
}